name: Metrics

on:
  schedule:
    - cron: "0 0 * * *"   # daily at midnight UTC
  workflow_dispatch:
  push:
    branches:
      - main
      - master

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Generate GitHub Metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: "AnkitShukla-arch"
          filename: "github-metrics.svg"
          template: "classic"
          base: "header, activity, community, repositories, metadata"

          # 🧠 Languages used in repositories
          plugin_languages: "yes"
          plugin_languages_details: "bytes-size, percentage"
          plugin_languages_limit: "8"

          # 🏆 Achievements
          plugin_achievements: "yes"
          plugin_achievements_display: "detailed"
          plugin_achievements_threshold: "X"

          # 🕒 Developer habits (active hours, week stats)
          plugin_habits: "yes"
          plugin_habits_facts: "yes"
          plugin_habits_charts: "yes"

          # 🌌 3D Skyline activity visualization
          plugin_skyline: "yes"
          plugin_skyline_year: "2023"
          plugin_skyline_frames: "120"
          plugin_skyline_quality: "1"

          # ⭐ Stargazer trends
          plugin_stargazers: "yes"
          plugin_stargazers_charts_type: "chartist"

          # 🧩 Repo topics and support sections
          plugin_support: "yes"
          plugin_topics: "yes"
          plugin_topics_mode: "icons"
          plugin_topics_limit: "0"

          # 🌍 Timezone & appearance
          config_timezone: "Asia/Kolkata"
          committer_message: "chore: update metrics"
